<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test EQ & Conflict Fix</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }
        .test-result { margin: 15px 0; padding: 15px; border-radius: 5px; }
        .success { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
        .failure { background: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; }
        pre { font-size: 11px; white-space: pre-wrap; margin: 10px 0; }
        button { margin: 5px; padding: 10px 15px; background: #007bff; color: white; border: none; border-radius: 4px; }
    </style>
</head>
<body>
    <h1>üß™ Test EQ & Conflict Fix</h1>
    <p>Testing if EQ and Conflict tests now load Spanish questions from testDefinitions</p>
    
    <button onclick="testEQAndConflictFix()">üß™ Test EQ & Conflict Spanish</button>
    
    <div id="results"></div>

    <script src="script.js"></script>
    <script>
        function testEQAndConflictFix() {
            console.clear();
            console.log('=== TESTING EQ & CONFLICT FIX ===');
            
            // Force Spanish
            currentLanguage = 'es';
            
            let results = '<h3>üß™ EQ & Conflict Spanish Fix Test Results</h3>';
            
            const tests = [
                { id: 'eq', name: 'Emotional Intelligence', expected: 'NEW - added to testDefinitions' },
                { id: 'conflict', name: 'Conflict Style', expected: 'NEW - added to testDefinitions' }
            ];
            
            tests.forEach(test => {
                let resultClass = 'failure';
                let statusText = '';
                let details = '';
                
                try {
                    // Check if exists in testDefinitions
                    const inTestDefs = !!(testDefinitions && testDefinitions[test.id] && testDefinitions[test.id].es);
                    
                    if (inTestDefs) {
                        const testData = testDefinitions[test.id].es;
                        const firstQ = testData.questions[0].text;
                        const isSpanish = /[√±√°√©√≠√≥√∫√º¬ø]/.test(firstQ) || 
                            firstQ.includes('Puedo ') || firstQ.includes('Cuando ') ||
                            firstQ.includes('t√≠picamente') || firstQ.includes('usualmente');
                        
                        if (isSpanish) {
                            resultClass = 'success';
                            statusText = `‚úÖ SPANISH - ${testData.questions.length} questions`;
                            details = `Title: "${testData.title}"
First Q: "${firstQ.substring(0, 80)}..."`;
                        } else {
                            resultClass = 'failure';
                            statusText = `‚ùå ENGLISH - ${testData.questions.length} questions`;
                            details = `First: "${firstQ.substring(0, 80)}..."`;
                        }
                    } else {
                        resultClass = 'failure';
                        statusText = '‚ùå NOT FOUND IN testDefinitions';
                        details = 'Test not found in centralized structure';
                    }
                } catch (error) {
                    resultClass = 'failure';
                    statusText = `‚ùå ERROR: ${error.message}`;
                    details = 'JavaScript execution error';
                }
                
                results += `
                    <div class="test-result ${resultClass}">
                        <h4>${test.name}</h4>
                        <p><strong>Status:</strong> ${statusText}</p>
                        <p><strong>Expected:</strong> ${test.expected}</p>
                        <pre>${details}</pre>
                    </div>
                `;
            });
            
            document.getElementById('results').innerHTML = results;
        }
        
        // Auto-run test
        setTimeout(() => testEQAndConflictFix(), 500);
    </script>
</body>
</html>